<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiubo.sam.dao.MedicalExpensesDao">

    <!--    查询-->
    <select id="queryMedicalExpenses" parameterType="com.jiubo.sam.bean.MedicalExpensesBean" resultType="com.jiubo.sam.bean.MedicalExpensesBean">
        SELECT ME.ME_ID,IS_IN_HOSPITAL,REMARKS
        ,ME.HOSP_NUM
        ,ME.DEPOSIT_FEE
        ,ME.REAL_FEE
        ,ME.ARREARS_FEE
        ,ME.CREATE_DATE
        ,ME.BEG_DATE
        ,ME.END_DATE
        ,ME.DAYS
        ,ME.ACCOUNT_ID
        ,P.NAME AS PATIENT_NAME
        ,DEPT.NAME AS DEPT_NAME
        FROM MEDICAL_EXPENSES ME
        LEFT JOIN PATIENT P ON P.HOSP_NUM = ME.HOSP_NUM
        LEFT JOIN DEPARTMENT DEPT ON DEPT.DEPT_ID=P.DEPT_ID
        <where>
            <if test="hospNum != null and hospNum != ''">
                AND ME.HOSP_NUM = #{hospNum}
            </if>
            <if test="patientName != null and patientName != ''">
                AND P.NAME LIKE '%' + #{patientName}+'%'
            </if>
            <if test="deptId != null and deptId != ''">
                AND P.DEPT_ID = #{deptId}
            </if>
        </where>
    </select>
</mapper>
